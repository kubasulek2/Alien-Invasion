$(()=>{let e=new function(){this.song=new Audio("../music/supernaturew.mp3"),this.boxes=$(".box"),this.magazine=$("#magazine"),this.game=$("#game"),this.score=$("#score"),this.timer=$("#time"),this.bullets=["|","|","|","|","|","|","|","|","|","|","|","|"],this.points=0,this.levelPoints=0,this.level=1,this.enemiesData=[],this.timeElapsed=0,this.paused=!1,this.gameOver=!1,this.started=!1,this.startNewGame=function(){this.soundtrack(),this.game.on("click",".alien",this.killAlien),this.animateStart(),setTimeout(()=>{this.paused||this.drawEnemy();const e=window.setInterval(()=>{if(!this.paused){let t=40;switch(this.level){case 3:t=37;break;case 6:t=34;break;case 9:t=31;break;case 10:t=29}this.timer.text(parseFloat(t-this.timeElapsed).toFixed(0)),this.timeElapsed=parseFloat((this.timeElapsed+.1).toFixed(2)),this.removeAlien(),this.timeElapsed%2||this.drawEnemy(),this.timeElapsed>=t&&this.levelUp(),this.gameOver&&clearInterval(e)}},100)},3500)},this.removeAlien=function(){this.enemiesData.forEach((e,t)=>{let s=$(e.element).find("div"),i=3.8;switch(this.level){case 2:i=3.4;break;case 5:i=3;break;case 8:i=2.6;break;case 10:i=2.2}this.timeElapsed-e.creationTime>=i&&(s.remove(),this.enemiesData.splice(t,1))})},this.killAlien=(e=>{let s=$(e.currentTarget);t.disabled||($(e.currentTarget).fadeOut(400,function(){s.remove()}),this.enemiesData=this.enemiesData.filter(t=>t.element!==e.currentTarget.parentElement),this.points+=1e3+100*(this.level-1),this.levelPoints+=1e3+100*(this.level-1),this.score.text(this.points))}),this.soundtrack=function(){this.song.addEventListener("ended",function(){this.currentTime=0,this.play()},!1),this.song.play()},this.enableAudioControl=function(){const e=$("#options i:first-child");let s=!0;return()=>{s?e.addClass("fa-volume-mute"):e.removeClass("fa-volume-mute"),s?e.removeClass("fa-volume-up"):e.addClass("fa-volume-up"),this.song.muted=s,t.shot.muted=s,t.reload.muted=s,s=!s}},this.mute=this.enableAudioControl(),this.drawEnemy=function(){let e=$('<div class=\'alien\'><img src="images/alien.png" alt=""></div>'),t=!1,s=Math.floor(15*Math.random());e.find("img").attr("draggable","false"),15!==this.boxes.find(".alien").length&&(this.boxes.each((i,a)=>{i===s&&0===$(a).has(".alien").length&&($(a).append(e),t=!0,this.enemiesData.push({location:i,element:a,creationTime:this.timeElapsed}))}),e.addClass(`animation${Math.ceil(3*Math.random())}`).addClass(`level${this.level<=9?Math.ceil(this.level/3):3}`),t||this.drawEnemy())},this.levelUp=function(){this.boxes.empty(),this.enemiesData.length=0,this.paused=!0,this.timeElapsed=0,this.levelPoints>=15e3?(this.level++,this.levelPoints=0,$("#level").text(this.level),this.animateStart(),setTimeout(()=>{this.paused=!1,this.drawEnemy()},3500)):this.endGame()},this.endGame=function(){this.gameOver=!0,$("#container").after($('<div id="gameOver"><h1>Game<br /> Over!</h1></div>')),$("body").on("click",function(){location.reload()})},this.animateStart=function(){const e=$("#countDown");let t=3;e.html(`Level&nbsp;${this.level}`),e.addClass("countAnimation"),setTimeout(()=>{e.text(t);let s=window.setInterval(()=>{t--,e.text(t),t<0&&(e.text("Start"),t<-1&&(e.removeClass("countAnimation"),window.clearInterval(s)))},500)},1e3)}};const t={shot:new Audio("../music/shot.mp3"),reload:new Audio("../music/reload.mp3"),disabled:!1,subject:"",mouseX:0,mouseY:0,xPos:0,yPos:0,clear:"",drawCursor:function(){this.xPos+=this.mouseX-this.xPos-25,this.yPos+=this.mouseY-this.yPos-25,this.subject.css({left:this.xPos,top:this.yPos})},animateCursor:function(s){this.subject=$("#cursor"),e.game.css("cursor","none");let i,a=Date.now,n=window.requestAnimationFrame,l=a(),o=()=>{a()-l<s||(l+=s,t.drawCursor()),i||n(o)};return n(o),this.clear=function(){i=1}},handleClick:function(){this.disabled||(this.shot.play(),this.subject.addClass("shot"),e.bullets.pop(),e.magazine.text(e.bullets.join("")),this.disabled=!0,0===e.bullets.length?setTimeout(()=>{this.reload.play(),this.subject.removeClass("shot"),this.subject.addClass("reload"),setTimeout(()=>{this.subject.removeClass("reload"),this.disabled=!1,e.bullets=["|","|","|","|","|","|","|","|","|","|","|","|"],e.magazine.text(e.bullets.join(""))},2200)},550):setTimeout(()=>{this.disabled=!1,this.subject.removeClass("shot")},550))}};$("#start").on("click",function(s){const i=$(s.currentTarget);e.started?e.paused?($(this).text("pause ||"),e.paused=!1,e.enemiesData.length>0&&e.enemiesData.forEach(e=>{$(e.element).find(".alien").removeClass("freeze")})):($(this).text("Resume"),e.paused=!0,e.enemiesData.length>0&&e.enemiesData.forEach(e=>{$(e.element).find(".alien").addClass("freeze")})):function(s){e.started=!0,e.game.on("mousemove",function(s){t.mouseX=s.pageX-e.game.offset().left,t.mouseY=s.pageY-e.game.offset().top}),e.game.on("mouseenter",function(){t.subject.css("display","block")}),e.game.on("mouseleave",function(){t.subject.removeAttr("style")}),e.game.on("click",()=>{t.handleClick()}),e.startNewGame(),t.animateCursor(1),s.text("pause ||")}(i)}),$(".fa-info").on("click",function(){$(".modal").css("display","flex"),$(".modal").animate({width:"30%"},400)}),$("#close").on("click",function(){$(".modal").animate({width:"0"},400,function(){$(".modal").css({display:"none"})})}),$(".fa-volume-up").on("click",e.mute)});
//# sourceMappingURL=app.js.map
