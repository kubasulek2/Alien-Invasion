{"version":3,"sources":["app.js"],"names":["$","newGame","this","timer","points","levelPoints","level","enemiesData","timeElapsed","paused","gameOver","startNewGame","soundtrack","on","animateStart","game","killAlien","setTimeout","drawEnemy","id","window","setInterval","levelDuration","removeAlien","toFixed","parseFloat","levelUp","clearInterval","forEach","el","index","disappear","find","alien","creationTime","cursor","disabled","currentTarget","fadeOut","score","e","remove","song","addEventListener","filter","element","parentElement","currentTime","play","text","flag","Audio","enemyLocation","Math","each","random","attr","boxes","length","addClass","has","push","location","ceil","endGame","counter","countDown","after","reload","removeClass","shot","subject","mouseX","mouseY","xPos","yPos","clear","drawCursor","css","left","top","animateCursor","dateNow","now","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","bullets","pop","join","magazine","console","pageX","offset","pageY","removeAttr"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        reload: new Audio('../music/reload.mp3'),\n        disabled: false,\n        subject: $('#cursor'),\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"shot\");\n                newGame.bullets.pop();\n                newGame.magazine.text(newGame.bullets.join(''));\n                console.log(newGame.bullets);\n                this.disabled = true;\n\n                if (newGame.magazine.length = 0){\n                    setTimeout(()=>{\n                        this.subject.removeClass(\"shot\");\n                        this.subject.addClass(\"reload\");\n                        setTimeout(()=>{\n                            this.subject.removeClass(\"reload\");\n                            this.disabled = false\n                        },2000)\n                    },500)\n                } else{\n                    setTimeout(()=> {\n                        this.disabled = false;\n                        this.subject.removeClass(\"shot\")\n                    },500)\n                }\n            }\n\n\n\n        }\n\n    };\n\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n    newGame.game.on('mousemove', function(e){\n        cursor.mouseX = e.pageX - newGame.game.offset().left;\n        cursor.mouseY = e.pageY - newGame.game.offset().top;\n    });\n    newGame.game.on('mouseenter', function () {\n        cursor.subject.css(\"display\",\"block\");\n    });\n\n    newGame.game.on('mouseleave',function () {\n        cursor.subject.removeAttr('style')\n    });\n    newGame.game.on('click', ()=>{\n        cursor.handleClick();\n\n    });\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.magazine = $('#magazine');\n        this.bullets = ['|','|','|','|','|','|','|','|','|','|','|','|'];\n        this.game = $('#game');\n        this.score =$('#score');\n        this.timer = $('#time');\n        this.points = 0;\n        this.levelPoints = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.startNewGame = function () {\n\n            this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n                        let levelDuration = 40;\n\n                        switch (this.level) {\n                            case 3:\n                                levelDuration = 37;\n                                break;\n                            case 6:\n                                levelDuration = 34;\n                                break;\n                            case 9:\n                                levelDuration = 31;\n                                break;\n                            case 10:\n                                levelDuration = 29;\n                                break;\n                        }\n                        this.timer.text(parseFloat(levelDuration - this.timeElapsed).toFixed(0));\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        this.removeAlien();\n                        !!(this.timeElapsed % 2) || this.drawEnemy();\n\n                        if (this.timeElapsed >= levelDuration) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                let disappear = 4;\n\n                switch (this.level) {\n                    case 2:\n                        disappear = 3.5;\n                        break;\n                    case 5:\n                        disappear = 3;\n                        break;\n                    case 8:\n                        disappear = 2.5;\n                        break;\n                    case 10:\n                        disappear = 2.2;\n                        break;\n                }\n\n                if( this.timeElapsed - el.creationTime >= disappear ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                }\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += 1000;\n                this.levelPoints += 1000;\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/supernaturew.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level<=9 ? Math.ceil(this.level/3) : 3 }`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.levelPoints >= 15000){\n\n                this.level++;\n                this.levelPoints = 0;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false;\n                    this.drawEnemy();\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n\n\n    $('#start').on(\"click\", ()=>{\n        newGame.startNewGame();\n        cursor.animateCursor(1);\n    });\n\n});\n"]}