{"version":3,"sources":["app.js"],"names":["$","newGame","this","levelPoints","Audio","level","enemiesData","timeElapsed","paused","gameOver","started","startNewGame","soundtrack","animateStart","setTimeout","drawEnemy","game","id","window","setInterval","killAlien","levelDuration","timer","parseFloat","removeAlien","levelUp","text","toFixed","forEach","disappear","clearInterval","el","index","alien","element","find","disabled","creationTime","points","splice","e","currentTarget","song","addEventListener","fadeOut","remove","filter","parentElement","enableAudioControl","icon","flag","muted","cursor","play","enemyLocation","addClass","removeClass","boxes","shot","reload","Math","floor","random","attr","length","empty","has","append","push","location","ceil","endGame","score","after","counter","countDown","on","html","mouseX","pageX","mouseY","pageY","css","subject","xPos","yPos","clear","drawCursor","left","top","animateCursor","delay","dateNow","Date","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","bullets","pop","join","magazine","animate","mute","offset","event","width","display"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        reload: new Audio('../music/reload.mp3'),\n        disabled: false,\n        subject: '',\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n\n            this.subject = $('#cursor');\n            newGame.game.css('cursor', 'none');\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"shot\");\n                newGame.bullets.pop();\n                newGame.magazine.text(newGame.bullets.join(''));\n                this.disabled = true;\n\n\n                if (newGame.bullets.length === 0){\n\n                    setTimeout(()=>{\n                        this.reload.play();\n                        this.subject.removeClass(\"shot\");\n                        this.subject.addClass(\"reload\");\n                        setTimeout(()=>{\n                            this.subject.removeClass(\"reload\");\n                            this.disabled = false;\n                            newGame.bullets = ['|','|','|','|','|','|','|','|','|','|','|','|'];\n                            newGame.magazine.text(newGame.bullets.join(''));\n\n                        },2200)\n                    },550)\n                } else{\n                    setTimeout(()=> {\n                        this.disabled = false;\n                        this.subject.removeClass(\"shot\")\n                    },550)\n                }\n            }\n\n\n\n        }\n\n    };\n\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n\n\n\n\n    function Game() {\n        this.song = new Audio(\"../music/supernaturew.mp3\");\n        this.boxes = $('.box');\n        this.magazine = $('#magazine');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.timer = $('#time');\n        this.bullets = ['|','|','|','|','|','|','|','|','|','|','|','|'];\n        this.points = 0;\n        this.levelPoints = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.started = false;\n        this.startNewGame = function () {\n\n            this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n\n\n            setTimeout(()=>{\n                if (!this.paused){\n                    this.drawEnemy();\n                }\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n                        let levelDuration = 40;\n\n                        switch (this.level) {\n                            case 3:\n                                levelDuration = 37;\n                                break;\n                            case 6:\n                                levelDuration = 34;\n                                break;\n                            case 9:\n                                levelDuration = 31;\n                                break;\n                            case 10:\n                                levelDuration = 29;\n                                break;\n                        }\n                        this.timer.text(parseFloat(levelDuration - this.timeElapsed).toFixed(0));\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        this.removeAlien();\n                        !!(this.timeElapsed % 2) || this.drawEnemy();\n\n                        if (this.timeElapsed >= levelDuration) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                let disappear = 3.8;\n\n                switch (this.level) {\n                    case 2:\n                        disappear = 3.4;\n                        break;\n                    case 5:\n                        disappear = 3;\n                        break;\n                    case 8:\n                        disappear = 2.6;\n                        break;\n                    case 10:\n                        disappear = 2.2;\n                        break;\n                }\n\n                if( this.timeElapsed - el.creationTime >= disappear ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                }\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += (1000 + 100*(this.level-1) );\n                this.levelPoints += (1000 + 100*(this.level-1) );\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n\n            this.song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            this.song.play()\n        };\n        this.enableAudioControl = function () {\n            const icon = $('#options i:first-child');\n            let flag = true;\n            return ()=> {\n               flag ? icon.addClass(\"fa-volume-mute\") : icon.removeClass(\"fa-volume-mute\");\n                flag ? icon.removeClass(\"fa-volume-up\") : icon.addClass(\"fa-volume-up\");\n                this.song.muted = flag;\n                cursor.shot.muted = flag;\n                cursor.reload.muted = flag;\n                flag = !flag\n            }\n        };\n        this.mute = this.enableAudioControl();\n\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level<=9 ? Math.ceil(this.level/3) : 3 }`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.level === 10){\n                this.endGame()\n            }\n\n            if(this.levelPoints >= 15000){\n                this.level++;\n                this.levelPoints = 0;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false;\n                    this.drawEnemy();\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            let score = $('<h2></h2>').text(`Your score: ${this.points} points`)\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            setTimeout(()=>{\n                $('#gameOver h1').after(score)\n            },1);\n\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n    function startGame(e){\n        newGame.started = true;\n        newGame.game.on('mousemove', function(e){\n            cursor.mouseX = e.pageX - newGame.game.offset().left;\n            cursor.mouseY = e.pageY - newGame.game.offset().top;\n        });\n        newGame.game.on('mouseenter', function () {\n            cursor.subject.css(\"display\",\"block\");\n        });\n\n        newGame.game.on('mouseleave',function () {\n            cursor.subject.removeAttr('style')\n        });\n        newGame.game.on('click', ()=>{\n            cursor.handleClick();\n\n        });\n        newGame.startNewGame();\n        cursor.animateCursor(1);\n        e.text(\"pause ||\");\n\n    }\n\n    $('#start').on(\"click\", function (e){\n        const event = $(e.currentTarget);\n        if (!newGame.started){\n            startGame(event)\n        }else{\n            if (!newGame.paused){\n                $(this).text('Resume');\n                newGame.paused = true;\n                if (newGame.enemiesData.length > 0) {\n                    newGame.enemiesData.forEach((el) => {\n                        $(el.element).find('.alien').addClass(\"freeze\");\n                        $(el.element).find('.alien').css(\"pointer-events\", \"none\")\n                    })\n                }\n            } else{\n                $(this).text('pause ||');\n                newGame.paused = false;\n                if (newGame.enemiesData.length > 0) {\n                    newGame.enemiesData.forEach((el)=>{\n                        $(el.element).find('.alien').removeClass(\"freeze\");\n                        $(el.element).find('.alien').css(\"pointer-events\", \"\")\n                    })\n                }\n            }\n        }\n    });\n\n    $('.fa-info').on(\"click\", function () {\n        $('.modal').css(\"display\",\"flex\");\n        $('.modal').animate({width: \"30%\"},400)\n    });\n    $('#close').on('click', function () {\n        $('.modal').animate({width: \"0\"},400, function () {\n            $('.modal').css({'display':'none'})\n\n        });\n    });\n\n    $('.fa-volume-up').on('click', newGame.mute)\n});\n"]}