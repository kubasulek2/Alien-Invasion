{"version":3,"sources":["app.js"],"names":["$","newGame","this","points","level","enemiesData","timeElapsed","paused","gameOver","startNewGame","setTimeout","killAlien","animateStart","id","drawEnemy","window","parseFloat","toFixed","removeAlien","clearInterval","forEach","el","index","alien","element","find","creationTime","remove","splice","e","cursor","score","currentTarget","fadeOut","song","addEventListener","filter","parentElement","currentTime","play","text","Audio","flag","enemyLocation","Math","each","append","location","boxes","length","addClass","ceil","random","push","levelUp","empty","endGame","countDown","counter","after","on","html","setInterval","removeClass","shot","disabled","subject","mouseX","mouseY","xPos","yPos","clear","drawCursor","css","left","top","animateCursor","dateNow","now","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","game","pageX","offset","pageY","removeAttr"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        disabled: false,\n        subject: $('#cursor'),\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"reload\");\n            }\n\n\n            this.disabled = true;\n            window.setTimeout(()=> {\n                this.disabled = false;\n                this.subject.removeClass(\"reload\")\n            },1500)\n        }\n\n    };\n    cursor.animateCursor(1);\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n    newGame.game.on('mousemove', function(e){\n        cursor.mouseX = e.pageX - newGame.game.offset().left;\n        cursor.mouseY = e.pageY - newGame.game.offset().top;\n    });\n    newGame.game.on('mouseenter', function () {\n        cursor.subject.css(\"display\",\"block\");\n    });\n\n    newGame.game.on('mouseleave',function () {\n        cursor.subject.removeAttr('style')\n    });\n    newGame.game.on('click', ()=>{\n        cursor.handleClick();\n\n    });\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.points = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.startNewGame = function () {\n            let paused = false;\n            //this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        !!(this.timeElapsed % 3) || this.drawEnemy();\n                        this.removeAlien();\n\n                        if (this.timeElapsed >= 4) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                if( this.timeElapsed - el.creationTime >= 5 ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                    }\n\n\n                //console.log(this.timeElapsed,  el.creationTime);\n                /*this.enemiesData = this.enemiesData.filter( el => {\n                    if( this.timeElapsed - el.creationTime <= 3){\n                        return el\n                    }\n                } )*/\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += 1000;\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/supernaturew.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level}`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.score.text() >= 1000 * this.level){\n\n                this.level++;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n\n\n    $('#start').on(\"click\", ()=>{\n        newGame.startNewGame();\n    });\n\n});\n"]}