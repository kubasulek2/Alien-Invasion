{"version":3,"sources":["app.js"],"names":["$","newGame","this","points","level","enemiesData","timeElapsed","startNewGame","setTimeout","killAlien","animateStart","id","drawEnemy","window","setInterval","removeAlien","parseFloat","toFixed","forEach","el","index","alien","element","find","creationTime","remove","splice","e","cursor","score","currentTarget","fadeOut","song","addEventListener","filter","parentElement","currentTime","play","text","Audio","flag","enemyLocation","Math","each","append","location","boxes","length","addClass","ceil","random","push","countDown","levelUp","clearInterval","counter","removeClass","shot","disabled","subject","mouseX","mouseY","xPos","yPos","clear","drawCursor","css","left","top","animateCursor","dateNow","now","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","game","on","pageX","offset","pageY","removeAttr"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    const newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        disabled: false,\n        subject: $('#cursor'),\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"reload\");\n            }\n\n\n            this.disabled = true;\n            window.setTimeout(()=> {\n                this.disabled = false;\n                this.subject.removeClass(\"reload\")\n            },1500)\n        }\n\n    };\n    cursor.animateCursor(1);\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n    newGame.game.on('mousemove', function(e){\n        cursor.mouseX = e.pageX - newGame.game.offset().left;\n        cursor.mouseY = e.pageY - newGame.game.offset().top;\n    });\n    newGame.game.on('mouseenter', function () {\n        cursor.subject.css(\"display\",\"block\");\n    });\n\n    newGame.game.on('mouseleave',function () {\n        cursor.subject.removeAttr('style')\n    });\n    newGame.game.on('click', ()=>{\n        cursor.handleClick();\n\n    });\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.points = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.startNewGame = function () {\n            let paused = false;\n            //this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                    !!(this.timeElapsed % 3) || this.drawEnemy();\n\n                    this.removeAlien();\n                },100)\n\n            },2500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                if( this.timeElapsed - el.creationTime >= 5 ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                    }\n\n\n                //console.log(this.timeElapsed,  el.creationTime);\n                /*this.enemiesData = this.enemiesData.filter( el => {\n                    if( this.timeElapsed - el.creationTime <= 3){\n                        return el\n                    }\n                } )*/\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += 1000;\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/Quirky-Action2.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level}`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n\n            countDown.addClass(\"countAnimation\");\n\n            let id = window.setInterval(()=>{\n                counter--;\n                countDown.text(counter);\n                if(counter<0){\n                    countDown.text(\"Start\");\n                    if(counter<-1){\n                        countDown.text(\"3\");\n                        countDown.removeClass(\"countAnimation\");\n                        window.clearInterval(id);\n                    }\n                }\n            },500)\n        }\n    }\n\n\n\n    $('#start').on(\"click\", ()=>{\n        newGame.startNewGame()\n        //newGame.animateStart();\n        //newGame.soundtrack()\n\n\n    });\n\n});\n"]}