{"version":3,"sources":["app.js"],"names":["$","newGame","this","levelPoints","level","enemiesData","timeElapsed","paused","gameOver","startNewGame","points","animateStart","setTimeout","drawEnemy","game","on","levelDuration","killAlien","id","window","setInterval","timer","parseFloat","removeAlien","levelUp","text","toFixed","forEach","disappear","clearInterval","el","index","alien","element","find","disabled","creationTime","splice","e","soundtrack","currentTarget","addEventListener","fadeOut","remove","filter","parentElement","flag","song","Audio","currentTime","boxes","Math","floor","random","attr","length","empty","has","append","push","location","addClass","ceil","endGame","after","reload","countDown","counter","html","startGame","mouseX","pageX","mouseY","pageY","css","removeClass","cursor","shot","subject","xPos","yPos","clear","drawCursor","left","top","animateCursor","delay","dateNow","Date","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","play","bullets","pop","join","magazine","offset","prepend","console","log","removeAttr"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        reload: new Audio('../music/reload.mp3'),\n        disabled: false,\n        subject: '',\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n\n            this.subject = $('#cursor');\n            newGame.game.css('cursor', 'none');\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"shot\");\n                newGame.bullets.pop();\n                newGame.magazine.text(newGame.bullets.join(''));\n                this.disabled = true;\n\n\n                if (newGame.bullets.length === 0){\n\n                    setTimeout(()=>{\n                        this.reload.play();\n                        this.subject.removeClass(\"shot\");\n                        this.subject.addClass(\"reload\");\n                        setTimeout(()=>{\n                            this.subject.removeClass(\"reload\");\n                            this.disabled = false;\n                            newGame.bullets = ['|','|','|','|','|','|','|','|','|','|','|','|'];\n                            newGame.magazine.text(newGame.bullets.join(''));\n\n                        },2200)\n                    },550)\n                } else{\n                    setTimeout(()=> {\n                        this.disabled = false;\n                        this.subject.removeClass(\"shot\")\n                    },550)\n                }\n            }\n\n\n\n        }\n\n    };\n\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.magazine = $('#magazine');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.timer = $('#time');\n        this.button= $('#start');\n        this.bullets = ['|'];\n        this.points = 0;\n        this.levelPoints = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.startNewGame = function () {\n\n            //this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n                        let levelDuration = 40;\n\n                        switch (this.level) {\n                            case 3:\n                                levelDuration = 37;\n                                break;\n                            case 6:\n                                levelDuration = 34;\n                                break;\n                            case 9:\n                                levelDuration = 31;\n                                break;\n                            case 10:\n                                levelDuration = 29;\n                                break;\n                        }\n                        this.timer.text(parseFloat(levelDuration - this.timeElapsed).toFixed(0));\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        this.removeAlien();\n                        !!(this.timeElapsed % 2) || this.drawEnemy();\n\n                        if (this.timeElapsed >= levelDuration) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                let disappear = 3.8;\n\n                switch (this.level) {\n                    case 2:\n                        disappear = 3.4;\n                        break;\n                    case 5:\n                        disappear = 3;\n                        break;\n                    case 8:\n                        disappear = 2.6;\n                        break;\n                    case 10:\n                        disappear = 2.2;\n                        break;\n                }\n\n                if( this.timeElapsed - el.creationTime >= disappear ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                }\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += (1000 + 100*(this.level-1) );\n                this.levelPoints += (1000 + 100*(this.level-1) );\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/supernaturew.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level<=9 ? Math.ceil(this.level/3) : 3 }`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.levelPoints >= 15000){\n\n                this.level++;\n                this.levelPoints = 0;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false;\n                    this.drawEnemy();\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n    function startGame(e){\n        newGame.game.on('mousemove', function(e){\n            cursor.mouseX = e.pageX - newGame.game.offset().left;\n            cursor.mouseY = e.pageY - newGame.game.offset().top;\n        });\n        newGame.game.on('mouseenter', function () {\n            cursor.subject.css(\"display\",\"block\");\n        });\n\n        newGame.game.on('mouseleave',function () {\n            cursor.subject.removeAttr('style')\n        });\n        newGame.game.on('click', ()=>{\n            cursor.handleClick();\n\n        });\n        newGame.startNewGame();\n        cursor.animateCursor(1);\n        $(e.currentTarget).remove();\n        $('#info').prepend($('<button id=\"pause\">pause ||</button>'))\n\n    }\n\n    $('#start').on(\"click\", startGame);\n    $('#info').on('click', '#pause', function () {\n        if ($(this).text() === 'pause ||'){\n            console.log('aa');\n            $(this).text('Resume');\n            newGame.paused = true\n        }else{\n            $(this).text('pause ||');\n            newGame.paused = false\n        }\n    })\n});\n"]}