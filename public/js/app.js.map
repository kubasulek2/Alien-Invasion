{"version":3,"sources":["app.js"],"names":["$","newGame","this","timer","points","levelPoints","level","enemiesData","timeElapsed","paused","gameOver","startNewGame","soundtrack","setTimeout","killAlien","animateStart","id","drawEnemy","window","setInterval","levelDuration","parseFloat","toFixed","removeAlien","clearInterval","disappear","el","index","alien","element","find","e","creationTime","splice","currentTarget","cursor","fadeOut","remove","filter","parentElement","song","Audio","addEventListener","currentTime","flag","enemyLocation","play","Math","random","length","boxes","each","has","addClass","append","push","location","ceil","levelUp","text","endGame","countDown","after","html","reload","counter","removeClass","shot","disabled","subject","mouseX","mouseY","xPos","yPos","clear","drawCursor","css","left","top","animateCursor","dateNow","now","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","game","on","pageX","offset","pageY","removeAttr"],"mappings":"AAAAA,EAAG,KACC,IAAIC,EAAU,IAqEV,WACAC,KAAKC,MAAQH,EAAE,QACfE,KAAKE,KAALJ,EAAc,SACdE,KAAKG,MAAAA,EAAAA,UACLH,KAAKI,MAAQN,EAAb,SACAE,KAAKK,OAAAA,EACLL,KAAKM,YAAa,EAClBN,KAAKO,MAAL,EACAP,KAAKQ,YAAW,GAChBR,KAAKS,YAAL,EAFAT,KAAKO,QAAS,EAIVP,KAAAQ,UAAKE,EACLV,KAAAS,aAAa,WADbT,KAAKU,aAILC,KAAAA,KAAAA,GAAW,QAAI,SAAAX,KAAAY,WACXZ,KAAAa,eAEAF,WAAMG,KACFd,KAAAe,YADJ,MAAMD,EAAKE,OAAOC,YAAY,KAItB,IAAAjB,KAAAO,OAAaH,CACT,IAAAc,EAAA,GAEI,OAAAlB,KAAAI,OACJ,KAAK,EACDc,EAAgB,GAChB,MACJ,KAAK,EACDA,EAAgB,GAChB,MACJ,KAAK,EACDA,EAAgB,GAChB,MAZR,KAAA,GAcKjB,EAAWkB,GAGhBnB,KAAGC,MAAKK,KAAAA,WAARY,EAA4BlB,KAA5BM,aAAAc,QAAA,IAFApB,KAAKM,YAAca,YAAYnB,KAAKM,YAAc,IAAKc,QAAQ,IAI/DpB,KAAIqB,cACArB,KAAAM,YAAA,GAAAN,KAAAe,YAEAf,KAAKQ,aAASU,GACdI,KAAAA,UAEPtB,KAAAQ,UA7BLc,cAAAR,KAoCHO,MAEG,OAIIrB,KAAAqB,YAAA,WACIE,KAAAA,YAAAA,QAAY,CAAAC,EAAZC,KACA,IAAAC,EAAA5B,EAAA0B,EAAAG,SAAAC,KAAA,OACJL,EAAA,EAEI,OAAAvB,KAAAI,OACJ,KAAK,EACDmB,EAAY,IACZ,MACJ,KAAK,EACDA,EAAY,EACZ,MAZR,KAAA,EAQQA,EAAY,IAOhB,MACAG,KAAAA,GACAH,EAAA,IAIPX,KAAciB,YAAKL,EAAAM,cAAAP,IAChBG,EAAUG,SALN7B,KAAKK,YAAY0B,OAAON,EAAM,OAUjCzB,KAAAY,UAFDiB,CAAAA,IAHJ,IAAIH,EAAQ5B,EAAE+B,EAAEG,eAQZC,EAAK/B,WACLJ,EAAA+B,EAAAG,eAAAE,QAAA,IAAA,WACAR,EAAAS,WAIHzB,KAAAA,YAAaV,KAAYK,YAAA+B,OAAAZ,GAAAA,EAAAG,UAAAE,EAAAG,cAAAK,eAC1BrC,KAAMsC,QAAWC,IACjBD,KAAKE,aAAiB,IAClBxC,KAAKyC,MAAAA,KAALzC,KAAAE,WAIPF,KAPDU,WAAA,WAQA,MAAKK,EAAY,IAAAwB,MAAA,6BACbD,EAAIZ,iBAAU,QAAA,WACVgB,KAAAA,YAAJ,EACIC,KAAAA,SACJjB,GANAY,EAAKM,QAQyC5C,KAAAe,UAAA,WAAQ,IAAAW,EAAA5B,EAAA,kEAJlD4C,GAAO,EAMXC,EAAiBlB,KAAMD,MAAK,GAAAqB,KAAAC,UACxBpB,EAAAE,KAAGH,OAAUkB,KAAAA,YAAiB7C,SAE1B,KAAA4C,KAAAA,MAAOd,KAAP,UAAAmB,SAEH/C,KAAAgD,MAAAC,KAAA,CAAAxB,EAAAD,KALLC,IAAAkB,GAAA,IAAA7C,EAAA0B,GAAA0B,IAAA,UAAAH,SAOMI,EAAAA,GAANC,OAAgB1B,GAJRgB,GAAO,EAMP1C,KAAKe,YAAbsC,KAAA,CAAAC,SAAA7B,EAAAE,QAAAH,EAAAM,aAAA9B,KAAAM,iBAGAoB,EAAKsB,qBAALH,KAAAU,KAAA,EAAAV,KAAAC,aAAAK,iBAAAnD,KAAAI,OAAA,EAAAyC,KAAAU,KAAAvD,KAAAI,MAAA,GAAA,KAEAsC,GAAKnC,KAALQ,cAHJf,KAAKwD,QAAU,WAMXxD,KAAGgD,MAAK7C,QAJRH,KAAKK,YAAY0C,OAAS,EAMtB/C,KAAAO,QAAA,EACAP,KAAAM,YAAKH,EAELH,KAAAG,aAAA,MAEIH,KAAAI,QACAJ,KAAAG,YAAA,EACHL,EAHD,UAAA2D,KAAAzD,KAAAI,OANJJ,KAWKa,eACDF,WAAK+C,KAER1D,KAAAO,QAAA,EApBLP,KAAAe,aAsBK2C,OAGC1D,KAAF0D,WAKJ1D,KAAKa,QAAAA,WACDb,KAAAQ,UAAMmD,EACN7D,EAAA,cAAA8D,MAAA9D,EAAA,uDACA6D,EAAAA,QAAUE,GAAAA,QAAM,WAPZP,SAASQ,YAYTH,KAAAA,aAAUF,WACV,MAAAE,EAAS3C,EAAOC,cACZ8C,IAAAA,EAAAA,EACAJ,EAAAA,mBAAeI,KAAf3D,SAEIuD,EAAAA,SAAAA,kBAEIA,WAAAA,KACA3C,EAAAA,KAAAA,GACH,IAAAF,EAAAE,OAAAC,YAAA,KACJ8C,IACHJ,EAVFF,KAAAM,GAFJA,EAAA,IAPJJ,EAAAF,KAAA,SAsBHM,GAAA,IAPuBJ,EAAUK,YAAY,kBAWtBhD,OAAIM,cAAAR,MAxPhC,MAkPc,OA/OV,MAAMmB,EAAS,CACXgC,KAAM,IAAI1B,MAAM,qBAChB2B,UAAU,EACVC,QAASrE,EAAE,WACXsE,OAAQ,EACRC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,MAAO,GACPC,WAAY,WACRzE,KAAKsE,MAAStE,KAAKoE,OAASpE,KAAKsE,KAAnB,GACdtE,KAAKuE,MAASvE,KAAKqE,OAASrE,KAAKuE,KAAnB,GACdvE,KAAKmE,QAAQO,IAAI,CAAAC,KAACA,KAAML,KAAPM,IAAkBA,KAAIL,QAIvCM,cAAIC,SAAeC,GAAnB,IAIIC,EAHAC,EAAAA,KAAAA,IACAC,EAFJlE,OAAAmE,sBAGIC,EAHJN,IAKQA,EAAUI,KACVE,IAAMH,EAAAA,IAAiBD,GAAAA,EAAvB/C,EAAAwC,cANRW,GAAAH,EAAAD,IASgCI,OAAhCH,EAAOD,GAAyBI,KAAAZ,MAAA,WAAAY,EAAA,IACnCC,YA1BU,WA2BXA,KAAanB,WACLlE,KAACiE,KAAKC,OACNlE,KAAKiE,QAAKrB,SAAV,WAKJ5C,KAAKkE,UAAW,EAChBlD,OAAOL,WAAW,KACdX,KAAKkE,UAAW,EAChBlE,KAAKmE,QAAQH,YAAY,WAF7B,OAOR/B,EAAO4C,cAAc,GAIrB9E,EAAQuF,KAAKC,GAAG,YAAa,SAAA1D,GACzBI,EAAOmC,OAASvC,EAAE2D,MAAQzF,EAAQuF,KAAKG,SAASd,KAChD1C,EAAOoC,OAASxC,EAAE6D,MAAQ3F,EAAQuF,KAAKG,SAASb,MAEpD7E,EAAQuF,KAAKC,GAAG,aAAc,WAC1BtD,EAAOkC,QAAQO,IAAI,UAAnB,WAGJ3E,EAAQuF,KAAKC,GAAG,aAAhB,WACItD,EAAOkC,QAAQwB,WAAW,WAE9B5F,EAAQuF,KAAKC,GAAG,QAAS,KACrBtD,EAAOoD,gBA2LXvF,EAAE,UAAUyF,GAAG,QAAS,KACpBxF,EAAQU","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        disabled: false,\n        subject: $('#cursor'),\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"reload\");\n            }\n\n\n            this.disabled = true;\n            window.setTimeout(()=> {\n                this.disabled = false;\n                this.subject.removeClass(\"reload\")\n            },600)\n        }\n\n    };\n    cursor.animateCursor(1);\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n    newGame.game.on('mousemove', function(e){\n        cursor.mouseX = e.pageX - newGame.game.offset().left;\n        cursor.mouseY = e.pageY - newGame.game.offset().top;\n    });\n    newGame.game.on('mouseenter', function () {\n        cursor.subject.css(\"display\",\"block\");\n    });\n\n    newGame.game.on('mouseleave',function () {\n        cursor.subject.removeAttr('style')\n    });\n    newGame.game.on('click', ()=>{\n        cursor.handleClick();\n\n    });\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.timer = $('#time');\n        this.points = 0;\n        this.levelPoints = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.startNewGame = function () {\n\n            this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n                        let levelDuration = 40;\n\n                        switch (this.level) {\n                            case 3:\n                                levelDuration = 37;\n                                break;\n                            case 6:\n                                levelDuration = 34;\n                                break;\n                            case 9:\n                                levelDuration = 31;\n                                break;\n                            case 10:\n                                levelDuration = 29;\n                                break;\n                        }\n                        this.timer.text(parseFloat(levelDuration - this.timeElapsed).toFixed(0));\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        this.removeAlien();\n                        !!(this.timeElapsed % 2) || this.drawEnemy();\n\n                        if (this.timeElapsed >= levelDuration) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                let disappear = 4;\n\n                switch (this.level) {\n                    case 2:\n                        disappear = 3.5;\n                        break;\n                    case 5:\n                        disappear = 3;\n                        break;\n                    case 8:\n                        disappear = 2.5;\n                        break;\n                    case 10:\n                        disappear = 2.2;\n                        break;\n                }\n\n                if( this.timeElapsed - el.creationTime >= disappear ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                }\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += 1000;\n                this.levelPoints += 1000;\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/supernaturew.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level<=9 ? Math.ceil(this.level/3) : 3 }`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.levelPoints >= 15000){\n\n                this.level++;\n                this.levelPoints = 0;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false;\n                    this.drawEnemy();\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n\n\n    $('#start').on(\"click\", ()=>{\n        newGame.startNewGame();\n    });\n\n});\n"]}