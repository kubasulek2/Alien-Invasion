{"version":3,"sources":["app.js"],"names":["$","newGame","this","points","levelPoints","level","enemiesData","timeElapsed","paused","gameOver","startNewGame","setTimeout","killAlien","animateStart","id","drawEnemy","window","parseFloat","toFixed","removeAlien","clearInterval","forEach","el","index","alien","element","find","creationTime","remove","splice","e","cursor","currentTarget","fadeOut","song","filter","parentElement","addEventListener","currentTime","play","text","Audio","flag","enemyLocation","Math","each","append","location","boxes","length","addClass","ceil","random","push","levelUp","empty","endGame","countDown","counter","after","on","html","setInterval","removeClass","shot","disabled","subject","mouseX","mouseY","xPos","yPos","clear","drawCursor","css","left","top","animateCursor","dateNow","now","intervalFunc","requestAnimation","start","requestAnimationFrame","stop","handleClick","game","pageX","offset","pageY","removeAttr"],"mappings":"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","file":"app.js","sourcesContent":["$( () => {\n    let newGame = new Game();\n\n    const cursor = {\n        shot: new Audio('../music/shot.mp3'),\n        disabled: false,\n        subject: $('#cursor'),\n        mouseX: 0,\n        mouseY: 0,\n        xPos: 0,\n        yPos: 0,\n        clear: '',\n        drawCursor: function(){\n            this.xPos += (this.mouseX - this.xPos-25);\n            this.yPos += (this.mouseY - this.yPos-25);\n            this.subject.css({left: this.xPos, top:this.yPos});\n\n        },\n        animateCursor: function(delay) {\n            let dateNow = Date.now,\n                requestAnimation=window.requestAnimationFrame,\n                start=dateNow(),\n                stop,\n                intervalFunc= ()=> {\n                    dateNow()-start<delay||(start+=delay,  cursor.drawCursor());\n                    stop||requestAnimation(intervalFunc)\n                };\n            requestAnimation(intervalFunc);\n            return this.clear = function(){ stop=1 };\n        },\n        handleClick: function(){\n            if (!this.disabled){\n                this.shot.play();\n                this.subject.addClass(\"reload\");\n            }\n\n\n            this.disabled = true;\n            window.setTimeout(()=> {\n                this.disabled = false;\n                this.subject.removeClass(\"reload\")\n            },1500)\n        }\n\n    };\n    cursor.animateCursor(1);\n    //cursor.clear();  zeby zatrzymac animacje\n\n\n    newGame.game.on('mousemove', function(e){\n        cursor.mouseX = e.pageX - newGame.game.offset().left;\n        cursor.mouseY = e.pageY - newGame.game.offset().top;\n    });\n    newGame.game.on('mouseenter', function () {\n        cursor.subject.css(\"display\",\"block\");\n    });\n\n    newGame.game.on('mouseleave',function () {\n        cursor.subject.removeAttr('style')\n    });\n    newGame.game.on('click', ()=>{\n        cursor.handleClick();\n\n    });\n\n\n\n    function Game() {\n        this.boxes = $('.box');\n        this.game = $('#game');\n        this.score =$('#score');\n        this.points = 0;\n        this.levelPoints = 0;\n        this.level = 1;\n        this.enemiesData = [];\n        this.timeElapsed= 0;\n        this.paused = false;\n        this.gameOver = false;\n        this.startNewGame = function () {\n\n            //this.soundtrack();\n            this.game.on('click','.alien', this.killAlien);\n            this.animateStart();\n\n            setTimeout(()=>{\n                this.drawEnemy();\n\n                const id = window.setInterval(()=>{\n                    if (!this.paused) {\n\n                        this.timeElapsed = parseFloat((this.timeElapsed + 0.1).toFixed(2));\n                        !!(this.timeElapsed % 3) || this.drawEnemy();\n                        this.removeAlien();\n\n                        if (this.timeElapsed >= 4) {\n                            this.levelUp()\n                        }\n                        if (this.gameOver){\n                            clearInterval(id)\n                        }\n                    }\n                },100);\n\n            },3500);\n\n\n        };\n        this.removeAlien = function(){\n            this.enemiesData.forEach((el,index)=>{\n                let alien = $(el.element).find('div');\n                if( this.timeElapsed - el.creationTime >= 5 ){\n                    alien.remove();\n                    this.enemiesData.splice(index,1)\n                    }\n\n\n                //console.log(this.timeElapsed,  el.creationTime);\n                /*this.enemiesData = this.enemiesData.filter( el => {\n                    if( this.timeElapsed - el.creationTime <= 3){\n                        return el\n                    }\n                } )*/\n            })\n        };\n        this.killAlien =  (e)=> {\n            let alien = $(e.currentTarget);\n\n            if (!cursor.disabled){\n                $(e.currentTarget).fadeOut(400,function () {\n                    alien.remove()\n                });\n\n                this.enemiesData = this.enemiesData.filter((el)=>el.element !== e.currentTarget.parentElement);\n                this.points += 1000;\n                this.levelPoints += 1000;\n                this.score.text(this.points)\n\n            }\n        };\n        this.soundtrack = function () {\n            const song = new Audio(\"../music/supernaturew.mp3\");\n            song.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            song.play()\n        };\n        this.drawEnemy = function () {\n            let alien = $(\"<div class='alien'><img src=\\\"images/alien.png\\\" alt=\\\"\\\"></div>\");\n            let flag = false;\n            let enemyLocation = Math.floor(Math.random()*15);\n            alien.find(\"img\").attr(\"draggable\", 'false');\n\n            if( this.boxes.find(\".alien\").length === 15){ return }\n\n            this.boxes.each((index,el)=>{\n                if(index === enemyLocation && $(el).has('.alien').length === 0){\n                    $(el).append(alien);\n                    flag = true;\n                    this.enemiesData.push({location:index, element:el, creationTime: this.timeElapsed})\n                }\n            });\n            alien.addClass(`animation${Math.ceil(Math.random()*3)}`).addClass(`level${this.level<=9 ? Math.ceil(this.level/3) : 3 }`);\n\n            flag || this.drawEnemy()\n        };\n        this.levelUp = function () {\n            this.boxes.empty();\n            this.enemiesData.length = 0;\n            this.paused = true;\n            this.timeElapsed = 0;\n\n            if(this.levelPoints >= 1000){\n\n                this.level++;\n                this.levelPoints = 0;\n                $('#level').text(this.level);\n                this.animateStart();\n                setTimeout(()=>{\n                    this.paused = false;\n                    this.drawEnemy();\n                }, 3500);\n\n            }else{\n                this.endGame()\n\n            }\n        };\n        this.endGame = function () {\n            this.gameOver = true;\n            $('#container').after($('<div id=\"gameOver\"><h1>Game<br /> Over!</h1></div>'));\n            $('body').on('click', function() {\n                location.reload();\n            })\n\n        };\n        this.animateStart = function () {\n            const countDown = $('#countDown');\n            let counter = 3;\n            countDown.html(`Level&nbsp;${this.level}`);\n\n            countDown.addClass(\"countAnimation\");\n\n            setTimeout( ()=> {\n                countDown.text(counter);\n                let id = window.setInterval(()=>{\n                    counter--;\n                    countDown.text(counter);\n                    if(counter<0){\n                        countDown.text(\"Start\");\n                        if(counter<-1){\n                            countDown.removeClass(\"countAnimation\");\n                            window.clearInterval(id);\n                        }\n                    }\n                },500)\n            },1000)\n        }\n    }\n\n\n\n    $('#start').on(\"click\", ()=>{\n        newGame.startNewGame();\n    });\n\n});\n"]}